{"version":3,"sources":["app.js"],"names":["angular","module","config","RestangularProvider","setDefaultHeaders","setFullRequestInterceptor","element","operation","route","url","headers","params","httpConfig","token","sessionStorage","getItem","_","extend","Authorization","BaseCtrl","$rootScope","$state","user","JSON","parse","getServer","buildURL","path","signedIn","signout","clear","window","location","reload","controller","DashboardCtrl","$scope","Restangular","$stateParams","$timeout","deleteData","sync","oneUrl","post","then","response","setItems","retrieved_items","syncToken","sync_token","catch","console","log","selectAll","subItems","item","checked","deselect","items","pageSize","currentItemsIndex","paginate","slice","paginatePrev","paginateNext","length","deleteSelectedWithSync","selected","filter","confirm","deleted","request","showDelete","savedItems","saved_items","savedItem","localItem","find","uuid","merge","destroySelected","destroyItems","destroyAll","uuids","map","remove","difference","ExtensionsCtrl","extType","decodeContent","contentString","jsonString","atob","content","getInitialExtensions","extensions","content_type","decodeExtensions","ext","String","performBackupForExt","requestSent","requestReceived","alert","plain","formData","addExtension","encodedContent","btoa","stringify","push","HomeCtrl","server","email","id","password","pw","submitLogin","setItem","error","data","$stateProvider","$urlRouterProvider","$locationProvider","state","abstract","parent","views","templateUrl","otherwise","$injector","$location","get","go","html5Mode"],"mappings":"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","file":"transpiled.js","sourcesContent":["'use strict';\n\nangular.module('app', [\n  'ui.router',\n  'restangular'\n])\n\n.config(function (RestangularProvider) {\n  RestangularProvider.setDefaultHeaders({\"Content-Type\": \"application/json\"});\n  RestangularProvider.setFullRequestInterceptor(function(element, operation, route, url, headers, params, httpConfig) {\n    var token = sessionStorage.getItem(\"jwt\");\n    if(token) {\n      headers = _.extend(headers, {Authorization: \"Bearer \" + token});\n    }\n\n    return {\n      element: element,\n      params: params,\n      headers: headers,\n      httpConfig: httpConfig\n    };\n  });\n})\n;class BaseCtrl {\n  constructor($rootScope, $state) {\n\n    $rootScope.user = JSON.parse(sessionStorage.getItem(\"user\"));\n\n    $rootScope.getServer = function() {\n      return sessionStorage.getItem(\"server\");\n    }\n\n    $rootScope.buildURL = function(path) {\n      return $rootScope.getServer() + \"/\" + path;\n    }\n\n    $rootScope.signedIn = sessionStorage.getItem(\"jwt\");\n\n    $rootScope.signout = function() {\n      sessionStorage.clear();\n      $rootScope.signedIn = false;\n      window.location.reload();\n    }\n  }\n}\n\nangular.module('app').controller('BaseCtrl', BaseCtrl);\n;class DashboardCtrl {\n  constructor($rootScope, $scope, Restangular, $stateParams, $timeout) {\n\n    $scope.deleteData = {};\n\n    $scope.sync = function() {\n      var url = $rootScope.buildURL(\"items/sync\");\n      Restangular.oneUrl(url, url).post().then(function(response){\n        $scope.setItems(response.retrieved_items);\n        $scope.syncToken = response.sync_token;\n      })\n      .catch(function(response){\n        console.log(\"Error: \", response);\n      })\n    }\n\n    $scope.sync();\n\n    $scope.selectAll = function() {\n      for(var item of $scope.subItems) {\n        item.checked = !item.checked;\n      }\n    }\n\n    $scope.deselect = function(items) {\n      for(var item of items) {\n        item.checked = false;\n      }\n    }\n\n    $scope.pageSize = 200;\n\n    $scope.setItems = function(items) {\n      $rootScope.items = items;\n      $scope.currentItemsIndex = 0;\n      $scope.paginate();\n    }\n\n    $scope.paginate = function() {\n      $scope.subItems = $rootScope.items.slice($scope.currentItemsIndex, $scope.currentItemsIndex + $scope.pageSize);\n    }\n\n    $scope.paginatePrev = function() {\n      $scope.currentItemsIndex -= $scope.pageSize;\n      if($scope.currentItemsIndex < 0) {\n        $scope.currentItemsIndex = 0;\n      }\n      $scope.paginate();\n    }\n\n    $scope.paginateNext = function() {\n      if($scope.currentItemsIndex + $scope.pageSize >= $rootScope.items.length) {\n        $scope.currentItemsIndex = $rootScope.items.length - $scope.pageSize;\n      } else {\n        $scope.currentItemsIndex += $scope.pageSize;\n      }\n      $scope.paginate();\n    }\n\n    $scope.deleteSelectedWithSync = function() {\n      let selected = $scope.subItems.filter(function(item){return item.checked});\n\n      if(!confirm(`Are you sure you want to delete and sync ${selected.length} items?`)) {\n        return;\n      }\n\n      for(var item of selected) {\n        item.deleted = true;\n      }\n\n      var url = $rootScope.buildURL(\"items/sync\");\n      var request = Restangular.oneUrl(url, url);\n      request.items = selected;\n      request.sync_token = $scope.syncToken;\n      console.log(\"request items\", request.items);\n      request.post().then(function(response){\n        $scope.deselect(selected);\n        $scope.deleteData.showDelete = false;\n        var savedItems = response.saved_items;\n        for(var savedItem of savedItems) {\n          var localItem = _.find($rootScope.items, {uuid: savedItem.uuid});\n          _.merge(localItem, savedItem);\n        }\n      })\n      .catch(function(response){\n        console.log(\"Error syncing:\", response);\n      })\n    }\n\n    $scope.destroySelected = function() {\n      let selected = $scope.subItems.filter(function(item){return item.checked});\n      if(!confirm(`Are you sure you want to delete and destroy ${selected.length} items?`)) {\n        return;\n      }\n\n      $scope.destroyItems(selected)\n    }\n\n    $scope.destroyAll = function() {\n      if(!confirm(`Danger: you are about to permanently delete all your items. Are you sure you want to delete and destroy ${$rootScope.items.length} items?`)) {\n        return;\n      }\n\n      $scope.destroyItems($rootScope.items)\n    }\n\n    $scope.destroyItems = function(items) {\n      var url = $rootScope.buildURL(\"items\");\n      var request = Restangular.oneUrl(url, url);\n      request.uuids = items.map(function(item){return item.uuid});\n      request.remove().then(function(response){\n        $scope.deselect(items);\n        $scope.deleteData.showDelete = false;\n        $rootScope.items = _.difference($rootScope.items, items);\n        $scope.subItems = _.difference($scope.subItems, items);\n      })\n      .catch(function(response){\n        console.log(\"destroy error:\", response);\n      })\n    }\n\n  }\n}\n\nangular.module('app').controller('DashboardCtrl', DashboardCtrl);\n;class ExtensionsCtrl {\n  constructor($rootScope, $scope, Restangular, $state, $stateParams) {\n\n    let extType = \"SF|Extension\";\n\n    function decodeContent(contentString) {\n      var jsonString = atob(contentString.slice(3, contentString.length));\n      var content = JSON.parse(jsonString);\n      return content;\n    }\n\n    $scope.getInitialExtensions = function() {\n      $scope.extensions = $rootScope.items.filter(function(item){\n        return item.content_type == extType;\n      })\n      $scope.decodeExtensions();\n    }\n\n    $scope.decodeExtensions = function() {\n      for(var ext of $scope.extensions) {\n        if(typeof ext.content === 'string' || ext.content instanceof String) {\n          ext.content = decodeContent(ext.content);\n        }\n      }\n    }\n\n    $scope.getInitialExtensions();\n\n    $scope.performBackupForExt = function(ext) {\n      if(!confirm(\"Performing an initial backup can take several minutes, depending on the number of items you have. You do not have to stick around for this process to complete.\")) {\n        return;\n      }\n\n      ext.requestSent = true;\n\n      var url = $scope.buildURL(\"items/backup\");\n      var request = Restangular.oneUrl(url, url);\n      request.uuid = ext.uuid;\n      request.post().then(function(response){\n        ext.requestSent = false;\n        ext.requestReceived = true;\n        console.log(\"Perform backup success: \", response);\n      })\n      .catch(function(response){\n        ext.requestSent = false;\n        alert(\"There was an error performing this backup. Please try again. Error: \" + response.plain());\n        console.log(\"Perform backup error:\", response);\n      })\n    }\n\n    $scope.formData = {url: \"\"};\n    $scope.addExtension = function() {\n      var content = {\n        url: $scope.formData.url\n      };\n\n      var encodedContent = \"000\" + btoa(JSON.stringify(content));\n      var ext = {content_type: extType, content: encodedContent};\n\n      var url = $scope.buildURL(\"items\")\n      var request = Restangular.oneUrl(url, url);\n      request.item = ext;\n      request.post().then(function(response){\n        console.log(\"response:\", response);\n        $scope.extensions.push(response.plain().item);\n        $scope.decodeExtensions();\n      })\n      .catch(function(response){\n        console.log(\"error adding ext:\", response);\n      })\n    }\n\n  }\n}\n\nangular.module('app').controller('ExtensionsCtrl', ExtensionsCtrl);\n;class HomeCtrl {\n  constructor($rootScope, $scope, Restangular, $state, $stateParams) {\n\n    $scope.formData = {};\n\n    if($stateParams.server) {\n      $scope.formData.server = $stateParams.server;\n    } else {\n      $scope.formData.server = \"https://n3.standardnotes.org\";\n    }\n\n    $scope.formData.email = $stateParams.id;\n    $scope.formData.password = $stateParams.pw;\n\n    $scope.submitLogin = function() {\n      var url = $scope.formData.server + \"/auth/sign_in\";\n      var request = Restangular.oneUrl(url, url);\n      request.email = $scope.formData.email;\n      request.password = $scope.formData.password;\n      request.post().then(function(response) {\n        console.log(\"Success:\", response);\n        sessionStorage.setItem(\"jwt\", response.token);\n        sessionStorage.setItem(\"server\", $scope.formData.server);\n        sessionStorage.setItem(\"user\", JSON.stringify(response.user));\n        $rootScope.signedIn = true;\n      })\n      .catch(function(response){\n        console.log(\"error:\", response);\n        $scope.formData.error = response.data.error;\n      })\n    }\n\n  }\n}\n\nangular.module('app').controller('HomeCtrl', HomeCtrl);\n;angular.module('app')\n  .config(function ($stateProvider, $urlRouterProvider, $locationProvider) {\n\n    $stateProvider\n      .state('base', {\n        abstract: true,\n      })\n\n      .state('home', {\n        url: '/?server&id&pw',\n        parent: 'base',\n        views: {\n          'content@' : {\n            templateUrl: 'templates/home.html',\n            controller: 'HomeCtrl'\n          }\n        }\n      })\n\n      // 404 Error\n      .state('404', {\n        parent: 'base',\n        views: {\n          'content@' : {\n            templateUrl: 'errors/404.html'\n          }\n        }\n      });\n\n      // Default fall back route\n      $urlRouterProvider.otherwise(function($injector, $location){\n         var state = $injector.get('$state');\n         state.go('404');\n         return $location.path();\n      });\n\n      // enable HTML5 Mode for SEO\n      $locationProvider.html5Mode(true);\n\n  });\n"]}